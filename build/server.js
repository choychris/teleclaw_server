"use strict";"production"!==process.env.NODE_ENV&&"staging"!==process.env.NODE_ENV&&require("dotenv").config();var loopback=require("loopback"),boot=require("loopback-boot"),app=module.exports=loopback(),Pusher=require("pusher"),cluster=require("cluster"),numCPUs=require("os").cpus().length,_process$env=process.env,PUSHER_APP_ID=_process$env.PUSHER_APP_ID,PUSHER_KEY=_process$env.PUSHER_KEY,PUSHER_SECRET=_process$env.PUSHER_SECRET,PUSHER_CLUSTER=_process$env.PUSHER_CLUSTER,pusher=new Pusher({appId:PUSHER_APP_ID,key:PUSHER_KEY,secret:PUSHER_SECRET,cluster:PUSHER_CLUSTER,encrypted:!0});app.pusher=pusher,app.start=function(){return app.listen(function(){app.emit("started");app.get("url").replace(/\/$/,"");if(app.get("loopback-component-explorer"))app.get("loopback-component-explorer").mountPath})},app.stop=function(){process.exit()},cluster.on("exit",function(e,r,p){cluster.fork()}),boot(app,__dirname,function(e){if(e)throw e;require.main===module&&app.start()});